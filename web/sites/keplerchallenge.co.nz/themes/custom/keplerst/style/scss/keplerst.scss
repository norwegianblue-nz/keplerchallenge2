@import "keplerst_mixins", "keplerst-style-vars", "keplerst-default-style-vars", "keplerstgs";
////////////////////////////////////////////////////////////////////////////////
//
/* Sandpit */
//
////////////////////////////////////////////////////////////////////////////////



// div#account-menu {display: block;}
// #logged-in-menu {
//   display: none; // INITIAL SATE
//   background-color: $keplerst_Orange;
//   width: 16rem;
//   position: absolute;
//   top: 3.4rem;
//   right: 3.6rem;}
// ul#logged-in-menu {list-style: none;	margin: 0rem;	padding: 0;
//     & li {padding: 0; margin: 0; color: #fff;
//       & a {color: #fff; display: block; padding:0.1rem 0.2rem;}
//       & a:hover{background-color: rgba($keplerst_DarkOrange, 0.7)}
//     }
// }
// div#account-menu:hover #logged-in-menu, div#account-menu:focus #logged-in-menu {display: block;}




// tmd sandy-pit

//



//  ============== ========= ======== ========
// Partners
//  Needs work on 'grid' once responsive image sizes complete
// .view-our-partners .view-content{
// 	display: flex;
// 	flex-wrap: wrap;
//   justify-content: space-between;
// }
// .view-our-partners .views-row {width: 48%; margin: 0 0 3rem 0;}
// @media all and (min-width: 480px) and (max-width: 767px) {.view-our-partners .views-row {width: 31.5%;}}
// @media all and (min-width: 768px) /*and (max-width: 1023px)*/ {.view-our-partners .views-row {width: 23.5%;}
// }
.view-our-partners  { // , .view-product-catalogue

.view-header + .view-content > div.views-row:first-of-type > .node--type-partners > .field--name-field-partner-logo {} // Specific for Naming rights sponsor

	.view-content {
    display: grid;
    grid-row-gap: 20px;
	}
	.field--name-field-partner-logo
   { // tmd = aspect-ratio-box container +++ Changed to Grid... keep for now in case a fall-back is needed
  	border: 1px solid #ddd;
		position: relative;
  // height: 0;
  // overflow: hidden;
  // padding-top: 500px / 500px * 100%;
  // background: white;
  // position: relative;
	}
	// .field--name-field-partner-logo picture { // tmd = aspect item... may not work!
  // position: absolute;
  // top: 0;
  // left: 0;
  // width: 100%;
  // height: 100%;
// }
	.field--name-field-partner-logo .field__label {display: none;}

	.field--name-field-partner-logo .field__item {
	position: absolute;
	top: 50%;
	transform: translateY(-50%);
	}

	@media all and (max-width:415px) {.view-content {grid-template-columns: 100%;}
    .field--name-field-partner-logo {height: 220px;} h3 {grid-column-start: 1;grid-column-end: span 1;}
	}
	@media all and (min-width:416px) and (max-width:767px) {.view-content {grid-template-columns: 40% 40%; grid-column-gap: 10%;}
    .field--name-field-partner-logo {height: 180px;} h3 {grid-column-start: 1;grid-column-end: span 2;}
	}
	@media all and (min-width:768px) and (max-width: 959px) {.view-content {grid-template-columns: 23% 23% 23% 23%; grid-column-gap: 2%;}
    .field--name-field-partner-logo {height: 160px;} h3 {grid-column-start: 1;grid-column-end: span 4;}
	}
	@media all and (min-width:960px) and (max-width: 1279px) {.view-content {grid-template-columns: 180px 180px 180px 180px; grid-column-gap: 20px;}
    .field--name-field-partner-logo {height: 190px;} h3 {grid-column-start: 1;grid-column-end: span 4;}
	}
	@media all and (min-width:1280px) {.view-content {grid-template-columns: 230px 230px 230px 230px; grid-column-gap: 20px;}
    .field--name-field-partner-logo {height: 230px;} h3 {grid-column-start: 1;grid-column-end: span 4;}
	}

	.views-row:first-of-type {grid-column-start: 1; grid-column-end: span 4; & .field--name-field-partner-logo {border: 0px solid #fff;}}
  .views-row:first-of-type .node--type-partners {grid-template-columns: 40% 40%; grid-column-gap:10%;}


  h3 {
	border-top: 1px solid #999;
	color: $keplerst_DarkOrange;
  }
	h3 a {color: $keplerst_DarkOrange;}

  .field--name-node-title h2 {margin-top: 0;}
  .field--name-node-title h2 a {@include keplerst_ubuntu-light ($color:$keplerst_DarkTeal, $size: 1.5rem);}
  .field--name-field-partner-url a {@include keplerst_baloo ($color: $keplerst_DarkOrange, $size:1.1rem);}
  .field--name-field-partner-description {@include keplerst_ubuntu-light ($color:$keplerst_GreyText, $size:1rem);}

} // view-our-partners {} ends

// Store product view >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
.view-product-catalogue { //, .path-product #main-layout


	.view-content {
    display: grid;
    grid-row-gap: 20px;
	}
  .field--name-field-product-image
   { // tmd = aspect-ratio-box container +++ Changed to Grid... keep for now in case of fall-back
  	border: 1px solid #999;
		position: relative;
	}

	.field--name-field-product-image .field__item {
	position: absolute;
	top: 50%;
  left: 50%;
  transform: translateX(-50%);
  transform: translateY(-50%);	}

	@media all and (max-width:415px) {.view-content {grid-template-columns: 100%;}
    .field--name-field-product-image {height: 220px;} /*h3 {grid-column-start: 1;grid-column-end: span 1;}*/
	}
	@media all and (min-width:416px) and (max-width:767px) {.view-content {grid-template-columns: 40% 40%; grid-column-gap: 10%;}
    .field--name-field-product-image {height: 180px;} h3 {grid-column-start: 1;grid-column-end: span 2;}
	}
	@media all and (min-width:768px) and (max-width: 959px) {.view-content {grid-template-columns: 23% 23% 23% 23%; grid-column-gap: 2%;}
    .field--name-field-product-image {height: 160px;} h3 {grid-column-start: 1;grid-column-end: span 4;}
	}
	@media all and (min-width:960px) and (max-width: 1279px) {.view-content {grid-template-columns: 180px 180px 180px 180px; grid-column-gap: 20px;}
    .field--name-field-product-image {height: 190px;} h3 {grid-column-start: 1;grid-column-end: span 4;}
	}
	@media all and (min-width:1280px) {.view-content {grid-template-columns: 230px 230px 230px 230px; grid-column-gap: 20px;}
    .field--name-field-product-image {height: 230px;} h3 {grid-column-start: 1;grid-column-end: span 4;}
	}

  // .field--name-node-title h2 {margin-top: 0;}
  // .field--name-node-title h2 a {@include keplerst_ubuntu-light ($color:$keplerst_DarkTeal, $size: 1.5rem);}
  // .field--name-field-partner-url a {@include keplerst_baloo ($color: $keplerst_DarkOrange, $size:1.1rem);}
  // .field--name-field-partner-description {@include keplerst_ubuntu-light ($color:$keplerst_GreyText, $size:1rem);}

  .field--name-title {margin-top: 0;}
  .field--name-title {@include keplerst_ubuntu-light ($color:$keplerst_DarkTeal, $size: 1.5rem);}


  .field--type-commerce-price {@include keplerst_ubuntu-light ($color:$keplerst_DarkOrange, $size: 1.1rem);
    font-size: 1.1rem;
    border-bottom: 1px solid #ccc;
    margin: 0.5rem 0;}

	#edit-quantity-wrapper {}
	.form-item {
		margin-top: 0em;
		margin-bottom: 0.4em;
		/* width: 100%; */
		display: flex;
		justify-content: space-between;
		align-items: center;
	}
	.form-select {
		font-weight: 300;
		font-size: 1.2em;
		padding: 2px 0;
	}
	.field--widget-commerce-quantity {
		width: 100%;
		display: inline-block;
	}
	.form-actions {
		width: 100%;
		display: inline-block;
	}


  label {@include keplerst_ubuntu-light ($color:$keplerst_Grey, $size: 1.1rem);}
  input.form-number {
  color: $keplerst_Grey;
  text-align: center;
  font-size: 1.2rem;
  width: 60px;
  height: 3rem;
  }
  input.button {
	height: 3rem;
	width: 100%;
	background-color: $keplerst_DarkOrange;
	border: 0;
	margin: 1rem 0;
	color: #fff;
  }
} // / Store {} ends


// Photo gallery
// .path-gallery {
@media all and (max-width: 599px) {.field--name-field-gallery-image {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}}
@media all and (min-width: 600px) {.field--name-field-gallery-image {
  	display: grid;
  	grid-column-gap: 2%;
  	grid-row-gap: 15px;
  }}
@media all and (min-width: 600px) and (max-width:959px){.field--name-field-gallery-image {
	grid-template-columns: 23.5% 23.5% 23.5% 23.5% ;
	grid-column-gap: 2%;
}}
@media all and (min-width: 960px){.field--name-field-gallery-image {
	grid-template-columns: 15% 15% 15% 15% 15% 15%;
	grid-column-gap: 2%;
}}
.colorbox.cboxElement {
	width: 120px;
	display: block;
	overflow: hidden;
}
.colorbox.cboxElement img {
	max-width: unset;
}
//} // /gallery

// Open News summary
.node--type-news-summary {
  #social_media-wrapper, #content2-outer-wrapper {}
  #block-views-block-news-articles-block-1 {
	border-top: solid 1px $keplerst_LightOrange;
	border-bottom: solid 1px $keplerst_LightOrange;
    & h2 {margin-top: 1rem;}
    & h2 a::after {
      content: url('/sites/keplerchallenge.co.nz/themes/custom/keplerst/images/link.svg');
      display: inline-block;
      top: 2px;
      position: relative;
      margin: 0 6px;
    }
  }
  @media all and (min-width: 600px) {
    .view-news-articles .view-content {display: flex; justify-content: space-between;}
    .view-news-articles .view-content .views-row {width: 30%;}
  }
  h2.news-teaser a {color:$keplerst_DarkOrange;font-size: 1.2rem;}
} // Close news summary

// Keeping sandy>>>>


// Main navigation >>>>>>>>>>>>>>>>> SAND PIT >>> move when complete



// tmd - temp >>>> talk to Roo about responsive img sizes and layout.
.region--postscript-fourth.region.region-postscript-fourth {
	display: flex;
	justify-content: space-between;
  text-align: center;
  flex-wrap: wrap;
}

// -/tmd sandy pit ends

/* End of main Sandpit *////////////////////////////////////////////////////////

/* Fixed bg images */
.nb_fixed-bg {
    min-height: 55vh;
    background-position: 50% 33%;
    background-repeat: no-repeat;
    background-size: cover;
    background-color:$keplerst_DarkTeal;
}
@media all and (min-width: 0px) {.nb_fixed-bg{}}
@media all and (min-width: 480px) and (max-width: 767px) {.nb_fixed-bg{}}
@media all and (min-width: 768px) /*and (max-width: 1023px)*/ {
	.nb_fixed-bg, #nb_slideshow_bg{
		height:1vh;
		/*background-attachment: fixed;*/
	}
}
@media all and (min-width: 1024px) and (max-width: 1219px) {.nb_fixed-bg{}}
@media all and (min-width: 1220px) {.nb_fixed-bg{}}


/* Sandpit extension */
#nb_bg_video{
   /* position: fixed;*/
    background-image: url(/sites/keplerchallenge.co.nz/files/video/poster_lg.jpg);
    min-height: 80vh;
    height: 1vh;
    position: relative;
    overflow: hidden;
    background-position: center center;
    background-repeat: no-repeat;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
}

#nb_bg_video .nb_background-video {
    position: absolute;
    min-width: 100%;
    min-height: 100%;
    position: absolute;
    width: auto;
    height: auto;
    top: 50%;
    left: 50%;
    -o-object-fit: contain;
    object-fit: contain;
    -webkit-transform: translate(-50%,-50%);
    -moz-transform: translate(-50%,-50%);
    -ms-transform: translate(-50%,-50%);
    -o-transform: translate(-50%,-50%);
    transform: translate(-50%,-50%);

}
/*End of sandpit extension */



footer.node__meta {float:right;}
// h2 {float:left;} tmd removed - old styling from KTRK?
.node__content{clear:both}

/*This Section from pealing.com but left in for reference as may be useful*/
//Pop-up Login Block
/*.ui-widget-content {font-family:$defaultBodyFont; color: $primaryColor2;}
#ui-id-1 {font-family: $defaultHeaderFont; color: $primaryColor1;}
#ui-id-1::before {content: "pealing.com ";}
.ui-widget input {width: 280px; color: $primaryColor1;}
.ui-dialog .ui-dialog-buttonpane button {width: 100%; margin: 0;font-family: $defaultHeaderFont; color: $primaryColor1;}
.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {margin: 0; padding: 0; width: 100%;}*/
// End Pop-up Login Block

// User Account Menu
.menu--account {display: none;}
.user-logged-in .menu--account {display: inline-block;float:right;}
.user-logged-in .menu--account li.menu-item {display: list-item !important;}
// End User Account Menu


// Header - split into two for branding and user menu
// tmd - removed - not required.

// @media all and (max-width: 959px) {
//     #block-keplerst-branding {@include parrotCols(9, 12, normal, '100');float:left;}
//     #block-loginformpopup {@include parrotCols(3, 12, normal, '100');float:right;}
// }
// @media all and (min-width: 960px) and (max-width: 1279px) {
//     #block-keplerst-branding {@include parrotCols(10, 12, normal, '960');float:left;}
//     #block-loginformpopup {@include parrotCols(2, 12, normal, '960');float:right;}
// }
// @media all and (min-width: 1280px) {
//     #block-keplerst-branding {@include parrotCols(10, 12, normal, '1200');float:left;}
//     #block-loginformpopup {@include parrotCols(2, 12, normal, '1200');float:right;}
// }
//
// // Postscript 1 and 2 evenly split across page down to mobile sizes
// @media all and (max-width: 480px) {
//     .region--postscript-first {@include parrotCols(12, 12, normal, '100');float:left;}
//     .region--postscript-second {@include parrotCols(12, 12, normal, '100');float:right;}
// }
// @media all and (min-width: 481px) and (max-width: 959px) {
//     .region--postscript-first {@include parrotCols(6, 12, normal, '100');float:left;}
//     .region--postscript-second {@include parrotCols(6, 12, normal, '100');float:right;}
// }
// @media all and (min-width: 960px) and (max-width: 1279px) {
//     .region--postscript-first {@include parrotCols(6, 12, normal, '960');float:left;}
//     .region--postscript-second {@include parrotCols(6, 12, normal, '960');float:right;}
// }
// @media all and (min-width: 1280px) {
//     .region--postscript-first {@include parrotCols(6, 12, normal, '1200');float:left;}
//     .region--postscript-second {@include parrotCols(6, 12, normal, '1200');float:right;}
// }





////////////////////////////////////////////////////////////////////////////////
//
/*   Specific layout and styling    */
//
////////////////////////////////////////////////////////////////////////////////

.btn {
   width: 100%;
   background:$keplerst_DarkTeal;
   display: block;
   margin: 1em 0;
   padding: 0.5em;
   @include keplerstCorners (3px);
   text-align: center;
   @include keplerst_ubuntu-medium ($keplerst_Tan1, 1.1em);
   max-width: 260px;
   border:none;
   &:hover {background:rgba($keplerst_DarkTeal, 0.8);color: $keplerst_Orange;}
}
.btn-lrg {
    padding: 1em 0.5em;
}

// To Top button
#block-tmdtotopbutton {
    position: fixed;
    bottom: 2.3rem;
    right: -5rem;
		opacity: 0;
		z-index: 200;
		@include keplerstTransition($type: opacity, $speed: 2s, $transition: ease-in-out);
}
.scrolled #block-tmdtotopbutton {
		opacity: 1;
		right: 1rem;
		@include keplerstTransition($type: opacity, $speed: 2s, $transition: ease-in-out);
}


/* TITLE BAR LAYOUT, MENU AND ELEMENTS >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>*/
#title-bar-wrapper {
	background-color: rgba(20,20,0,0.6);
	position: fixed;
	padding: 0.2rem 0;
	width: 100%;
	box-shadow: 0px 0px 30px 30px rgba(0,0,0,0.7);
  -webkit-box-shadow: 0px 0px 30px 30px rgba(0,0,0,0.7);
  -moz-box-shadow: 0px 0px 30px 30px rgba(0,0,0,0.7);
  @include keplerstTransition (all, 1s, ease-in-out);
  z-index: 10;
	height: 60px; // 3.6rem
}
div#page.scrolled #title-bar-wrapper {
	background-color: rgba(80,80,70,1);
	box-shadow: 0 0 0px 0px rgba(0, 0, 0, 0);
  -webkit-box-shadow: 0 0 0px 0px rgba(0, 0, 0, 0);
  -moz-box-shadow: 0 0 0px 0px rgba(0, 0, 0, 0);
  @include keplerstTransition (all, 0.5s, ease-in-out);
}


// (layout)
.region--title-bar.region-title-bar {
	display: flex;justify-content: space-between;align-items: center;
}
#block-keplerst-search {flex-grow: 33;} // tmd - creates wider space for search and allows grow on focus

#block-tmdaccountlogin,
#block-tmdaccountloginloggedin,
#block-keplerst-branding,
#block-tmdsponsorlogotop
{flex-grow: 1; margin: 0 0.5rem; // margin replaces widths
}
#block-tmdaccountloginloggedin{display: none;}

@media all and (max-width: 959px) { // Change media query to match search box or search form display
  .region--title-bar.region-title-bar {justify-content: flex-end;}
  #block-tmdaccountlogin,
  #block-tmdaccountloginloggedin,
  #block-keplerst-branding,
  #block-tmdsponsorlogotop
  {flex-grow: unset;}

}

#site-branding {padding: 7px 0 0;} //tmd - allows for odd height spacing of logo img

// (menus - main and account)

/* Hamburger toggle and animation */
//  Menu styling on page - see ultimenu for specifics
@keyframes fade-in1 {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
@keyframes fade-in2 {
  from {
    opacity: 0;
    top: 25vh;
  }
  to {
    opacity: 1;
    top: 60px; // was 61px
  }
}
@keyframes fade-in2b {
  from {
    opacity: 0;
    top: 25vh;
  }
  to {
    opacity: 1;
    top: 0;
  }
}
@keyframes fade-in2-logged-in {
  from {
    opacity: 0;
    top: 25vh;
  }
  to {
    opacity: 1;
    top: 90px; //5.5rem; // was 61px
  }
}
@keyframes fade-in2b-logged-in {
  from {
    opacity: 0;
    top: 25vh;
  }
  to {
    opacity: 1;
    top: 0;
  }
}
#menu-outer-wrapper {
	background-color: $keplerst_DarkTeal;
  width: 100%;
  position: relative;
  top: 0;
  z-index: 9;
  animation-name: fade-in1;
  animation-duration: 2s;
  animation-timing-function: ease;
}
#header-outer-wrapper + #menu-outer-wrapper {margin-top: 60px;} // 3.4rem Offset for non top-pic pages


#menu-outer-wrapper.hamburger-clicked {position: fixed; z-index: 11;} // generic

#nb_fixed-bg0 + #menu-outer-wrapper.hamburger-clicked {
  top: 90px; //3.6rem;
  animation-name: fade-in2;
  animation-duration: 1s;
  animation-timing-function: ease;
}
#header-outer-wrapper + #menu-outer-wrapper.hamburger-clicked {
  top: 0;
  animation-name: fade-in2b;
  animation-duration: 1s;
  animation-timing-function: ease;
}


// Override when logged in
.user-logged-in {
#nb_fixed-bg0 + #menu-outer-wrapper.hamburger-clicked {
  top: 90px; //3.6rem;
  animation-name: fade-in2-logged-in;
  animation-duration: 1s;
  animation-timing-function: ease;
}
#header-outer-wrapper + #menu-outer-wrapper.hamburger-clicked {
  top: 0;
  animation-name: fade-in2b-logged-in;
  animation-duration: 1s;
  animation-timing-function: ease;
}

} // Close user-logged-in

// Hamburger-Menu -example css . Edit as necessary.
.responsive-menu-toggle-icon::before, .responsive-menu-toggle-icon::after, .responsive-menu-toggle-icon span.icon {
	background: #c00;
	//content: '';
	//display: block;
	//width: 20px;
	//height: 3px;
	//position: absolute;
	//top: 0;
	//left: 13px;
	//border-radius: 2px;
}
#block-hamburgernonmobile {min-width: 34px; &:hover {cursor: pointer;}} // tmd - force display of hand pointer

@media all and (max-width: 959px) {
  #nonmobile_hamburger {display: none; } // tmd - show/hide relative to ultimenu hamburger
}
@media all and (min-width: 960px) {
  #nonmobile_hamburger {display: block;} // tmd - show/hide relative to ultimenu hamburger
}

/*  logged-in account menu */
#logged-in-menu {
  background-color: $keplerst_Orange;
  position: absolute;
  text-align:left;
  right: 0;}
ul#logged-in-menu {list-style: none;	margin: 2px 0;	padding: 0;
    & li {padding: 0; margin: 0; color: #fff; display: inline-block; height:30px;
      & a {color: #fff; display: block; padding:0.2rem 0.6rem;}
      &:first-of-type a {padding-left:1rem;}
      & a:hover {background-color: rgba($keplerst_DarkOrange, 0.7)}
    }
}
#logged-in-menu-stripe {
	position: fixed;
	top: 60px; //3.6rem;
	width: 100%;
	left: 0;
	// background-color: rgba($keplerst_DarkOrange, 0.45);
	height: 30px; //1.9rem;
  background-image:
      linear-gradient(
        to right,
        rgba($keplerst_DarkOrange, 0.45),
        rgba($keplerst_DarkOrange, 0.45) 80%,
        rgba($keplerst_Orange, 1) 20%
      );
}
@media screen and (max-width: 415px){ #logged-in-menu{width: 105%; text-align:center;} #logged-in-menu-stripe {display: none;}}
@media screen and (min-width: 416px) and (max-width:959px) { #logged-in-menu{width: 24rem;}}
@media screen and (min-width: 960px) and (max-width:1279px) { #logged-in-menu{width: 24rem;}}
@media screen and (min-width: 1280px){
  #logged-in-menu{width: 24rem;}
  #logged-in-menu-stripe {  background-image: linear-gradient(
        to right,
        rgba($keplerst_DarkOrange, 0.45),
        rgba($keplerst_DarkOrange, 0.45) 70%,
        rgba($keplerst_Orange, 1) 30%
      );
  }
}


/* Logged-in overrides */
.user-logged-in {
  #block-tmdaccountloginloggedin {display: block;}
	#block-tmdaccountloginloggedin #account-menu > a {border-bottom: 4px solid $keplerst_Orange;}
  #block-tmdaccountlogin {display: none;}
  #header-outer-wrapper + #menu-outer-wrapper {margin-top: 90px;}//5.5rem;}
  #header-outer-wrapper + #menu-outer-wrapper.hamburger-clicked {top:0;}
}



// (elements)
/* Search boxes */

@media all and (max-width: 959px) {
  #block-keplerst-search {display: none;}
}
@media all and (min-width: 960px) {
  #block-searchform {display: none;}
}

#block-searchform,
#block-keplerst-search {
 & .js-form-item.form-item.js-form-type-search.form-type-search.js-form-item-keys.form-item-keys.form-no-label {
	@include keplerst_ubuntu-light($keplerst_GreyText, 1.1em);
}

& input#edit-keys, & input#edit-keys--2 {
	width: 170px;
	border: 1px solid $keplerst_Orange;
	padding: 5px;
	background-color: rgba($keplerst_Tan1, 0.3);
	@include keplerstTransition (all, 0.5s, ease-in-out);

}
& input#edit-keys, & input#edit-keys--2 {
	&:hover, &:focus {background-color: rgba($keplerst_Tan1, 0.8);width:50%;}
	@include keplerstTransition (all, 0.5s, ease-in-out);
}

& input#edit-submit, & input#edit-submit--2, & input#edit-submit--3 {
	@include keplerst_ubuntu-light(white, 0.8em);
	padding: 7px 7px;
	background-color: $keplerst_DarkOrange;
	border: 1px solid $keplerst_DarkOrange;
	text-transform: uppercase;
	position: relative;
	top: -2px;
}
}
#block-searchform {padding: 1rem 0;}

// title bar ends //

/* PREFACE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>*/

#preface1-outer-wrapper{
  background-color: $keplerst_DarkestTeal;
}
#preface1-outer-wrapper p {color:white;}


/* SOCIAL ICONS >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>*/
#block-tmdsocialiconspage-2 {text-align: center;} // tmd - icons at top of pages


/* CONTENT >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>*/
// main col padding
@media all and (min-width: 600px) {
  .region-content {padding: 0 8.47%;}
}
// @media all and (min-width: 768px) {
//   .region-content, .region-content {padding: 0 64px;}
// }
@media all and (min-width: 960px) {
  .region-content {padding: 0 80px;}
}
@media all and (min-width: 1280px) {
  .region-content {padding: 0 100px;}
}


// Inline Pictures
.node--type-general-content .region-content {
picture, figure {
	float: left;
	margin: 0.7rem 1.2rem 1rem 0;
	clear: left;
}
figure picture {width: 100%; margin: 0;}
@media all and (max-width: 415px){picture, figure {width: 100%;}}
@media all and (min-width:416px) and (max-width: 959px){picture, figure {width: 49%;}}
figure {margin:0.7rem 1.2rem 0 0;} // In-line image plus caption style
} // Close region-content


/* Bottom of content */
// Watermark (sort-of) bg
#block-tmd-keplerlogowatermark {min-width: 100%;margin: 0 auto;} // tmd - this is added as a block to ensure height is generated simply (as opposed to a bg image which would require padding etc)

// Content end pictures
#block-footerimage1, #block-footerimage2, #block-footerimage3, #block-footerimage4 {margin: 0 0 2vw 0; & img{width:100%;}}
@media all and (max-width: 415px){#block-footerimage1, #block-footerimage2, #block-footerimage3, #block-footerimage4 {width: 48%;}}
@media all and (min-width:416px) and (max-width: 599px){#block-footerimage1, #block-footerimage2, #block-footerimage3, #block-footerimage4 {width: 21.7%;}}
@media all and (min-width:600px) and (max-width: 959px){#block-footerimage1, #block-footerimage2, #block-footerimage3, #block-footerimage4 {width: 23%;}}

// FAQ Page specifics >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

// /*Add some spacing*/
.faq-section{
    margin: 40px 0;
        position: relative;
}

// /*Hide the paragraphs*/
.faq-section p{
    display: none;
		font-size: 1.3em;
}

// /*Hide the checkboxes */
.faq-section input{
    position: absolute;
    z-index: 2;
    cursor: pointer;
    opacity: 0;
    display: none\9; /* IE8 and below */
    margin: 0;
    width: 100%;
    height: 36px;
}

// /*Show only the clipped intro - not used */
.faq-section label + p {
	display: block;
	transition: all .15s ease-out;
	// /* text-overflow: ellipsis; */
	// /* white-space: nowrap; */
	// /* overflow: hidden; */
}

// /*If the checkbox is checked, show all paragraphs*/
.faq-section input[type=checkbox]:checked~p{
    display: block;
    color: $keplerst_Grey;
    font-size: 1.3em;
    /* restore clipping defaults */
    text-overflow: clip;
    white-space: normal;
    overflow: visible;
}

// /*Style the label*/
.faq-section label {
	font-size: 1.4em;
	display: block;
	position: relative;
	/* height: 20px; */
	padding: 7px 10px;
	border-left: 10px solid $keplerst_Grey;
	transition: all .15s ease-out;
}

// /*Remove text selection when toggle-ing*/
.faq-section label::selection{
    background: none;
}

.faq-section label:hover{
    background: rgba ($keplerst_Orange, 0.5);
}

// /*If the checkbox is checked, style the label accordingly*/
.faq-section input[type="checkbox"]:checked ~ label {
	border-color: $keplerst_Orange;
}
// /*Label's arrow - default state */
.faq-section label::before{
    content: '';
    position: absolute;
    right: 4px;
    top: 50%;
    margin-top: -6px;
    border: 10px solid transparent;
    border-left-color: inherit;
}

// /*Update the right arrow*/
.faq-section input[type=checkbox]:checked~label::before{
    border: 10px solid transparent;
    border-top-color: inherit;
    margin-top: -3px;
    right: 10px;
}


/* FOOTER HEADER >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>*/

#footer-header-outer-wrapper {background-color: $keplerst_DarkTeal;text-align: center;}
#footer-header-outer-wrapper #block-tmdsocialiconspage {margin: 2rem 0 1.7rem;}
#footer-header-outer-wrapper #social-icon-wrapper {
    display: inline-table;
    white-space: nowrap;
    &:before, &:after {
      border-top: 1px solid white;
      content: '';
      display: table-cell;
      position: relative;
      top: 1.5em;
      width: 13%;
    }
    &:before { right: 1em; }
    &:after { left: 1em; }
}
@media all and (min-width: 480px) and (max-width: 599px) {#footer-header-outer-wrapper #social-icon-wrapper {&:before, &:after {width:25%;}}}
@media all and (min-width: 600px) and (max-width: 839px) {#footer-header-outer-wrapper #social-icon-wrapper {&:before, &:after {width:31%;}}}
@media all and (min-width: 840px) {#footer-header-outer-wrapper #social-icon-wrapper {&:before, &:after {width:33%;}}}

a.social-icon {padding: 0 0.5rem;}


/* FOOTER >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>*/

//  Typography
.region--footer h2 {
  @include keplerst_baloo(white, 1.2em);
	letter-spacing: 0.05em;
	float: none;
}
.region--footer p {
  @include keplerst_ubuntu-light($keplerst_Tan1,1.1em);
  margin: 0 0 0.7em;
  line-height: 1.2;
}
.region--footer p a {
  color: rgba($keplerst_Tan1, 1);
  @include keplerstTransition(opacity, 0.25s, ease-in-out);
  border-bottom:none !important;
  &:hover {
    color: rgba($keplerst_Tan1, 0.85);
  }
}

// Footer menu
.tmd-footer-menu-container {display: flex;flex-wrap: wrap;justify-content: space-between;}
.tmd-footer-menu {
    width: 23.5%;
    min-width: 136px;
    margin-bottom: 5rem;
}
@media all and (min-width: 960px) {
    .tmd-footer-menu-container {display: grid;  grid-template-columns: 23.5% 23.5% 23.5% 23.5%;  grid-gap: 2%; }
    .tmd-footer-menu {margin-left: 0;margin-right: 0;width: 100%; }
}

// Footer bg image
#footer-outer-wrapper {
    background-color: $keplerst_DarkOrange;
    background-repeat: no-repeat;
    min-height: 65vh;
    background-position: 50% bottom;
    background-size: cover;
}
@media all and (min-width: 0px) {#footer-outer-wrapper{background-image: url("/sites/keplerchallenge.co.nz/themes/custom/keplerst/images/backgrounds/footer-bg-mob.png");}}
@media all and (min-width: 480px) and (max-width: 767px) {#footer-outer-wrapper{background-image: url("/sites/keplerchallenge.co.nz/themes/custom/keplerst/images/backgrounds/footer-bg-sml.png");}}
@media all and (min-width: 768px) and (max-width: 959px) {#footer-outer-wrapper{background-image: url("/sites/keplerchallenge.co.nz/themes/custom/keplerst/images/backgrounds/footer-bg-med.png");}}
@media all and (min-width: 768px) {#footer-outer-wrapper {/*height:1vh;*/background-attachment: fixed;}}
@media all and (min-width: 960px) and (max-width: 1279px) {#footer-outer-wrapper{background-image: url("/sites/keplerchallenge.co.nz/themes/custom/keplerst/images/backgrounds/footer-bg-lrg.png");}}
@media all and (min-width: 1280px) {#footer-outer-wrapper{background-image: url("/sites/keplerchallenge.co.nz/themes/custom/keplerst/images/backgrounds/footer-bg-xlrg.png");}}

// footer lower layout >>>>
@media all and (min-width: 600px) {
  #block-tmdfooteraccountlogin {float: left;width: 49%;}
  #block-tmdnewslettersignup, #block-tmdfooteraddressblock {float: right;clear: right;width: 49%;}
}
@media all and (min-width: 840px) {
  #mc-embedded-subscribe-form, .footer-col-wrapper {display: flex;}
  .footer-col-right {width:35%; padding-left:10px;}
  .footer-col-left {width: 65%; padding-right:10px;}
  #block-tmdfooteraccountlogin .btn, #block-tmdnewslettersignup .btn, #block-tmdfooteraddressblock .btn {&:first-of-type{margin-top: 0;}}
}

// Mail chimp signup form - footer >>>>>>
#mce-EMAIL {
	width: 100%;
	height: 3.1rem;
  @include keplerstCorners (3px);
  @include keplerst_ubuntu-light (#000, 1.3em);
  padding: 0 0 0 0.6em;
  border: 1px solid #000;
  background-color: rgba(255, 255, 255, 0.05);
}
#mce-EMAIL {&:hover, &:focus{background-color: rgba(255, 255, 255, 0.5);}}

// TMD / NWB last word sign-off text >>>>>>>>>>>
#block-thelastword p {
  @include keplerst_ubuntu-light (#888, 0.8em);
	line-height: 1.1em;
	margin: 0.6em 0 0.7em;
}


/* COPYRIGHT >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>*/
.region--copyright {padding: 20px 0;}
.region--copyright #copyright {
  float:left; @include keplerst_ubuntu-light($keplerst_GreyText,20px); margin: 10px 0 20px;
}
.region--copyright #footer-logo {float:right;width:220px;}
@media all and (max-width: 600px){
  .region--copyright #footer-logo {float:none;}
}
#copyright-outer-wrapper {border-bottom: 1px solid $keplerst-Grey;}



// >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

/* FRONT PAGE OVERRIDES >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>*/

// >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

.path-frontpage { // THIS WRAPS FRONT PAGE OVERRIDES

// Main top image
  .nb_fixed-bg {background-attachment: fixed;} // Make hero images fixed on home.


// Title Bar

// Teaser (inc BG image / video)
  .nb_fixed-bg { // Larger home page top image
    min-height: 80vh;}
  #teaser-layout{
  position:relative;
  height: 100%;
  }

  .region--teaser { // move tab to bottom of video window
  position:absolute !important;
  //background-color: $keplerst_DarkestTeal;
  text-align: center;
  bottom: 0;
  }
  .region--teaser p {
  color:white;
  display: inline-table; // needed for lines either side
  background-color: $keplerst_DarkestTeal;
  margin: 0;
  font-weight: 500;
  padding: 0.5rem 2rem;

  &::before, &::after { // before and after for left and right lines
  border-top: 2px solid white;
  content: '';
  display: table-cell;
  position: relative;
  top: 1rem;
  width: 10%;}
  &::before {right:1rem;} // add padding between line and text
  &::after {left:1rem;}
  }

// Preface 1
  #preface1-outer-wrapper {
    min-height: 10vh;
    position: relative;
}
//   #preface1-outer-wrapper p {
//     color: white;
// }
  #preface-first-layout {
    text-align: center;
    position: absolute;
    top: 50%;
    left: 50%;
		-webkit-transform: translate(-50%,-50%);
    -moz-transform: translate(-50%,-50%);
    -ms-transform: translate(-50%,-50%);
    -o-transform: translate(-50%,-50%);
    transform: translate(-50%,-50%);

}

// Menu (menu bar srtip)
  #menu-outer-wrapper {background-color: $keplerst_DarkOrange;min-height: 2rem;}

// Btns (not shown on front)
  section#btns-outer-wrapper { // overrides margin for social icons on pages
        margin: 0;
    }
// Preface 2 (Race detail "60km")
  #preface-second-layout {text-align: center;}
  #block-tmdfrontpageracedetail {padding: 65vh 0 0 0px;}
// Preface 3 (Banner with logos)
  #preface3-outer-wrapper {
    background: url("/sites/keplerchallenge.co.nz/themes/custom/keplerst/images/smaller-kepler-bmp.jpg") 50% 50% no-repeat;
  	background-size: cover;
    padding: 2rem;
  }
  #strapline-banner {display: flex;justify-content: space-evenly;align-items: center;}
  @media all and (min-width: 799px) {#strapline-banner {padding: 0 10%;} // Push logos closer to centre on wider screens
  }
// Content
  .region-content, .region-content2 {text-align: center;}
  .front-buttons a {
  @include keplerstCorners($rad: 3px);
  display: inline-block;
  text-transform: uppercase;
  padding: 1.5em 0.5em;
  background-color: $keplerst_DarkOrange;
  margin: 0.5em;
  width: 180px;
  color: $keplerst_Tan1;
  &:hover {background-color: rgba($keplerst_DarkOrange,0.8);}
  }

  #content1-outer-wrapper, #content2-outer-wrapper {padding-bottom: 3rem;}

}// THIS CLOSES FRONT PAGE OVERRIDES
